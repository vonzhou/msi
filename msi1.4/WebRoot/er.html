<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>er.html</title>
	
    <meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
    <meta http-equiv="description" content="this is my page">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    
    <!--<link rel="stylesheet" type="text/css" href="./styles.css">-->
    <script type="text/javascript">
  var xmlHttp=null;
  var timerValuePre=-1;//利用本次ajax请求获得的定时器值，与之前的进行比较如果相同
  //则表示无效，否则进行响应，并且更新timerValuePre
  var timerValueCurrent=null;//
  var enterFlag=0;//
  
  function GetXmlHttpObject(handler){ 
	var objXmlHttp=null;
	objXmlHttp=new XMLHttpRequest();
	if(objXmlHttp.overrideMimeType){
		objXmlHttp.overrideMimeType('text/xml'); 
	}	
	objXmlHttp.onload=handler ;
	objXmlHttp.onerror=handler ;
	return objXmlHttp;
  }
  
  
  function doaction(){
	if (xmlHttp.readyState==4 || xmlHttp.readyState=="complete"){
	document.getElementById("content").innerHTML=xmlHttp.responseText;
	var key=Number(document.getElementById("key").innerHTML);
	timerValueCurrent=Number(document.getElementById("timer").innerHTML);
	enterFlag=Number(document.getElementById("enterFlag").innerHTML);
	
	if(timerValuePre!=timerValueCurrent){
		timerValuePre=timerValueCurrent;
	switch(key){
		case -1://key invalid,do nothing.
			break;
		case 39: //right
			break; 
		case 37:   //left
			 break;
		case 40:  //down key
			break;
		case 38:  //up key
			break; 
		case 13:  //enter
			break;	
		case 640://back
			break;
		case 468://home
			window.location.href="home.jsp";
			break;
	}//end switch
	
	if(enterFlag==1){
	}
	}//end !=
    }//end if readystate
  }

	function startXMLHttp(){
		var url = "generalMonitor.jsp?flag=";
  		var callbackfun= doaction ;
		xmlHttp=GetXmlHttpObject(callbackfun);
		xmlHttp.open("GET", url , true);
		xmlHttp.send(null);
		
		setTimeout("startXMLHttp()" , 1000);
	}
	function loadPage(){
	startXMLHttp();
	}
    </script>

  </head>
  
  <body onload="loadPage();">
    <h1>具体业务有待实现</h1>
  </body>
</html>
